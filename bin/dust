#!/usr/bin/env node


/************************************
*                                   *
*  main binary - sets up defaults   *
*                                   *
*************************************/

var silent = true;
exports.silent = silent;

var fs = require('fs');
exports.fs = fs;

var shell = require('shelljs');
exports.shell = shell;

// Standard Config File to be placed in Home Directory
activeMod = "c64";
var config = {
	"activeMod" : activeMod,
	"dustLogo": true,
    "mods": {
        "c64": {
            "systemName": "Commodore C64",
            "tutorialsIdentifier": "dust-tutorial-c64",
            "templatesIdentifier": "dust-template-c64"
            }
    }
}


/*
* Try to find the config file for dustlayer or create if absent
*/

try {
    // Query the entry
    configFile = process.env['HOME'] + "/.dust.json";
    stats = fs.lstatSync(configFile);
    // File is found, let's use the activeMod from the config file
    activeMod = require(process.env['HOME'] + "/.dust.json").activeMod;
}
catch (e) {
    console.log("Config File not found - creating one in ~/.dust.json");
  fs.writeFile(configFile, JSON.stringify(config,null, 4), function (err) {
        if (err) throw err;
        console.log("Started for the first time, created config file.");
    });


}

// make the config available to DUST
exports.config = config;

var cmd = require('commander');
exports.cmd = cmd;
require('../lib/dust_cmd');

var env = require('../lib/dust_env');
exports.env = env;

var text = require('../lib/dust_text');
exports.text = text;

var ansi = require('ansi');
var color = ansi(process.stdout);
exports.color = color;

var test = require('../lib/dust_test');
exports.test = test;

var setup = require('../lib/dust_setup');
exports.setup = setup;

var github = require('../lib/dust_github');
exports.github = github;

var tutorials = require('../lib/dust_tutorials');
exports.tutorials = tutorials;

var externals = require('../lib/dust_externals')
exports.externals = externals;

var templates = require('../lib/dust_templates')
exports.templates = templates;

/* Set Mod */


/* booting 'dust' */
require('../lib/dust_boot');



 








